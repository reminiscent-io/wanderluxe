| schemaname | tablename           | policyname                                             | cmd    | roles           | permissive | qual                                                                                                                                                                                               | with_check                                                                                                                                                                                                                                                                               |
| ---------- | ------------------- | ------------------------------------------------------ | ------ | --------------- | ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| cron       | job                 | cron_job_policy                                        | ALL    | {public}        | PERMISSIVE | (username = CURRENT_USER)                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                     |
| cron       | job_run_details     | cron_job_run_details_policy                            | ALL    | {public}        | PERMISSIVE | (username = CURRENT_USER)                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                     |
| public     | accommodations      | Allow delete accommodations with edit permission       | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | accommodations      | Allow insert accommodations with edit permission       | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | accommodations      | Allow read access to accommodations                    | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | accommodations      | Allow update accommodations with edit permission       | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | accommodations      | accommodations_delete_policy                           | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | accommodations      | accommodations_insert_policy                           | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | accommodations      | accommodations_select_policy                           | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | accommodations      | accommodations_update_policy                           | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | accommodations_days | Allow delete accommodation days with edit permission   | DELETE | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM accommodations a
  WHERE ((a.stay_id = accommodations_days.stay_id) AND user_has_edit_permission(a.trip_id))))                                                          | null                                                                                                                                                                                                                                                                                     |
| public     | accommodations_days | Allow insert accommodation days with edit permission   | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | (EXISTS ( SELECT 1
   FROM accommodations a
  WHERE ((a.stay_id = accommodations_days.stay_id) AND user_has_edit_permission(a.trip_id))))                                                                                                                                                |
| public     | accommodations_days | Allow read access to accommodation days                | SELECT | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM accommodations a
  WHERE ((a.stay_id = accommodations_days.stay_id) AND user_has_read_permission(a.trip_id))))                                                          | null                                                                                                                                                                                                                                                                                     |
| public     | accommodations_days | Allow update accommodation days with edit permission   | UPDATE | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM accommodations a
  WHERE ((a.stay_id = accommodations_days.stay_id) AND user_has_edit_permission(a.trip_id))))                                                          | null                                                                                                                                                                                                                                                                                     |
| public     | accommodations_days | accommodations_days_delete_policy                      | DELETE | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM accommodations a
  WHERE ((a.stay_id = accommodations_days.stay_id) AND user_has_edit_permission(a.trip_id))))                                                          | null                                                                                                                                                                                                                                                                                     |
| public     | accommodations_days | accommodations_days_insert_policy                      | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | (EXISTS ( SELECT 1
   FROM accommodations a
  WHERE ((a.stay_id = accommodations_days.stay_id) AND user_has_edit_permission(a.trip_id))))                                                                                                                                                |
| public     | accommodations_days | accommodations_days_select_policy                      | SELECT | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM accommodations a
  WHERE ((a.stay_id = accommodations_days.stay_id) AND user_has_read_permission(a.trip_id))))                                                          | null                                                                                                                                                                                                                                                                                     |
| public     | accommodations_days | accommodations_days_update_policy                      | UPDATE | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM accommodations a
  WHERE ((a.stay_id = accommodations_days.stay_id) AND user_has_edit_permission(a.trip_id))))                                                          | null                                                                                                                                                                                                                                                                                     |
| public     | chat_logs           | Users can delete their own chat messages               | DELETE | {public}        | PERMISSIVE | (user_id = auth.uid())                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                     |
| public     | chat_logs           | Users can insert chat logs for accessible trips        | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | (trip_id IN ( SELECT trips.trip_id
   FROM trips
  WHERE (trips.user_id = auth.uid())
UNION
 SELECT trip_shares.trip_id
   FROM trip_shares
  WHERE (trip_shares.shared_by_user_id = auth.uid())))                                                                                       |
| public     | chat_logs           | Users can read chat logs for accessible trips          | SELECT | {public}        | PERMISSIVE | (trip_id IN ( SELECT trips.trip_id
   FROM trips
  WHERE (trips.user_id = auth.uid())
UNION
 SELECT trip_shares.trip_id
   FROM trip_shares
  WHERE (trip_shares.shared_by_user_id = auth.uid()))) | null                                                                                                                                                                                                                                                                                     |
| public     | chat_logs           | Users can update their own chat messages               | UPDATE | {public}        | PERMISSIVE | (user_id = auth.uid())                                                                                                                                                                             | (user_id = auth.uid())                                                                                                                                                                                                                                                                   |
| public     | currencies          | Authenticated users can read currencies                | SELECT | {authenticated} | PERMISSIVE | true                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                     |
| public     | currencies          | Service role can modify currencies                     | ALL    | {service_role}  | PERMISSIVE | true                                                                                                                                                                                               | true                                                                                                                                                                                                                                                                                     |
| public     | day_activities      | Allow delete day activities with edit permission       | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | day_activities      | Allow insert day activities with edit permission       | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | day_activities      | Allow read access to day activities                    | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | day_activities      | Allow update day activities with edit permission       | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | day_activities      | day_activities_delete_policy                           | DELETE | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM trip_days td
  WHERE ((td.day_id = day_activities.day_id) AND user_has_edit_permission(td.trip_id))))                                                                   | null                                                                                                                                                                                                                                                                                     |
| public     | day_activities      | day_activities_insert_policy                           | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | (EXISTS ( SELECT 1
   FROM trip_days td
  WHERE ((td.day_id = day_activities.day_id) AND user_has_edit_permission(td.trip_id))))                                                                                                                                                         |
| public     | day_activities      | day_activities_select_policy                           | SELECT | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM trip_days td
  WHERE ((td.day_id = day_activities.day_id) AND user_has_read_permission(td.trip_id))))                                                                   | null                                                                                                                                                                                                                                                                                     |
| public     | day_activities      | day_activities_update_policy                           | UPDATE | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM trip_days td
  WHERE ((td.day_id = day_activities.day_id) AND user_has_edit_permission(td.trip_id))))                                                                   | null                                                                                                                                                                                                                                                                                     |
| public     | exchange_rates      | Allow anyone to read exchange rates                    | SELECT | {authenticated} | PERMISSIVE | true                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                     |
| public     | expenses            | Allow delete expenses with edit permission             | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | expenses            | Allow insert expenses with edit permission             | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | expenses            | Allow read access to expenses                          | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | expenses            | Allow update expenses with edit permission             | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | expenses            | Users can insert expenses for their own trips          | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | (EXISTS ( SELECT 1
   FROM trips
  WHERE ((trips.trip_id = expenses.trip_id) AND (trips.user_id = auth.uid()))))                                                                                                                                                                         |
| public     | expenses            | expenses_delete_policy                                 | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | expenses            | expenses_insert_policy                                 | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | expenses            | expenses_select_policy                                 | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | expenses            | expenses_update_policy                                 | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | other_expenses      | Allow delete other expenses with edit permission       | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | other_expenses      | Allow insert other expenses with edit permission       | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | other_expenses      | Allow read access to other expenses                    | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | other_expenses      | Allow update other expenses with edit permission       | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | other_expenses      | Users can manage their own expenses                    | ALL    | {public}        | PERMISSIVE | (trip_id IN ( SELECT trips.trip_id
   FROM trips
  WHERE (trips.user_id = auth.uid())))                                                                                                            | null                                                                                                                                                                                                                                                                                     |
| public     | other_expenses      | other_expenses_delete_policy                           | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | other_expenses      | other_expenses_insert_policy                           | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | other_expenses      | other_expenses_select_policy                           | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | other_expenses      | other_expenses_update_policy                           | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | profiles            | Allow authenticated users to update their own profiles | UPDATE | {authenticated} | PERMISSIVE | (( SELECT auth.uid() AS uid) = id)                                                                                                                                                                 | (( SELECT auth.uid() AS uid) = id)                                                                                                                                                                                                                                                       |
| public     | profiles            | Allow authenticated users to view their own profiles   | SELECT | {authenticated} | PERMISSIVE | (( SELECT auth.uid() AS uid) = id)                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                     |
| public     | profiles            | Public profiles are viewable by everyone               | SELECT | {public}        | PERMISSIVE | true                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                     |
| public     | profiles            | Users can insert their own profile                     | INSERT | {authenticated} | PERMISSIVE | null                                                                                                                                                                                               | (auth.uid() = id)                                                                                                                                                                                                                                                                        |
| public     | profiles            | Users can update their own profile                     | UPDATE | {authenticated} | PERMISSIVE | (auth.uid() = id)                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | reservations        | Allow delete reservations with edit permission         | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | reservations        | Allow insert reservations with edit permission         | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | reservations        | Allow read access to reservations                      | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | reservations        | Allow update reservations with edit permission         | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | reservations        | Users can delete their own restaurant reservations     | DELETE | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM (trip_days
     JOIN trips ON ((trips.trip_id = trip_days.trip_id)))
  WHERE ((trip_days.day_id = reservations.day_id) AND (trips.user_id = auth.uid()))))              | null                                                                                                                                                                                                                                                                                     |
| public     | reservations        | Users can delete their restaurant reservations         | DELETE | {authenticated} | PERMISSIVE | (day_id IN ( SELECT trip_days.day_id
   FROM trip_days
  WHERE (trip_days.trip_id IN ( SELECT trips.trip_id
           FROM trips
          WHERE (trips.user_id = auth.uid())))))                 | null                                                                                                                                                                                                                                                                                     |
| public     | reservations        | Users can insert their own restaurant reservations     | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | (EXISTS ( SELECT 1
   FROM (trip_days
     JOIN trips ON ((trips.trip_id = trip_days.trip_id)))
  WHERE ((trip_days.day_id = reservations.day_id) AND (trips.user_id = auth.uid()))))                                                                                                    |
| public     | reservations        | Users can insert their restaurant reservations         | INSERT | {authenticated} | PERMISSIVE | null                                                                                                                                                                                               | (day_id IN ( SELECT trip_days.day_id
   FROM trip_days
  WHERE (trip_days.trip_id IN ( SELECT trips.trip_id
           FROM trips
          WHERE (trips.user_id = auth.uid())))))                                                                                                       |
| public     | reservations        | Users can update their own restaurant reservations     | UPDATE | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM (trip_days
     JOIN trips ON ((trips.trip_id = trip_days.trip_id)))
  WHERE ((trip_days.day_id = reservations.day_id) AND (trips.user_id = auth.uid()))))              | null                                                                                                                                                                                                                                                                                     |
| public     | reservations        | Users can update their restaurant reservations         | UPDATE | {authenticated} | PERMISSIVE | (day_id IN ( SELECT trip_days.day_id
   FROM trip_days
  WHERE (trip_days.trip_id IN ( SELECT trips.trip_id
           FROM trips
          WHERE (trips.user_id = auth.uid())))))                 | (day_id IN ( SELECT trip_days.day_id
   FROM trip_days
  WHERE (trip_days.trip_id IN ( SELECT trips.trip_id
           FROM trips
          WHERE (trips.user_id = auth.uid())))))                                                                                                       |
| public     | reservations        | Users can view their own restaurant reservations       | SELECT | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM (trip_days
     JOIN trips ON ((trips.trip_id = trip_days.trip_id)))
  WHERE ((trip_days.day_id = reservations.day_id) AND (trips.user_id = auth.uid()))))              | null                                                                                                                                                                                                                                                                                     |
| public     | reservations        | Users can view their restaurant reservations           | SELECT | {authenticated} | PERMISSIVE | (day_id IN ( SELECT trip_days.day_id
   FROM trip_days
  WHERE (trip_days.trip_id IN ( SELECT trips.trip_id
           FROM trips
          WHERE (trips.user_id = auth.uid())))))                 | null                                                                                                                                                                                                                                                                                     |
| public     | transportation      | Allow delete transportation with edit permission       | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | transportation      | Allow insert transportation with edit permission       | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | transportation      | Allow read access to transportation                    | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | transportation      | Allow update transportation with edit permission       | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | transportation      | Users can delete their own transportation events       | DELETE | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM trips
  WHERE ((trips.trip_id = transportation.trip_id) AND (trips.user_id = auth.uid()))))                                                                             | null                                                                                                                                                                                                                                                                                     |
| public     | transportation      | Users can delete their transportation events           | DELETE | {authenticated} | PERMISSIVE | (trip_id IN ( SELECT trips.trip_id
   FROM trips
  WHERE (trips.user_id = auth.uid())))                                                                                                            | null                                                                                                                                                                                                                                                                                     |
| public     | transportation      | Users can insert their own transportation events       | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | (EXISTS ( SELECT 1
   FROM trips
  WHERE ((trips.trip_id = transportation.trip_id) AND (trips.user_id = auth.uid()))))                                                                                                                                                                   |
| public     | transportation      | Users can insert their transportation events           | INSERT | {authenticated} | PERMISSIVE | null                                                                                                                                                                                               | (trip_id IN ( SELECT trips.trip_id
   FROM trips
  WHERE (trips.user_id = auth.uid())))                                                                                                                                                                                                  |
| public     | transportation      | Users can update their own transportation events       | UPDATE | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM trips
  WHERE ((trips.trip_id = transportation.trip_id) AND (trips.user_id = auth.uid()))))                                                                             | null                                                                                                                                                                                                                                                                                     |
| public     | transportation      | Users can update their transportation events           | UPDATE | {authenticated} | PERMISSIVE | (trip_id IN ( SELECT trips.trip_id
   FROM trips
  WHERE (trips.user_id = auth.uid())))                                                                                                            | (trip_id IN ( SELECT trips.trip_id
   FROM trips
  WHERE (trips.user_id = auth.uid())))                                                                                                                                                                                                  |
| public     | transportation      | Users can view their own transportation events         | SELECT | {public}        | PERMISSIVE | (EXISTS ( SELECT 1
   FROM trips
  WHERE ((trips.trip_id = transportation.trip_id) AND (trips.user_id = auth.uid()))))                                                                             | null                                                                                                                                                                                                                                                                                     |
| public     | transportation      | Users can view their transportation events             | SELECT | {authenticated} | PERMISSIVE | (trip_id IN ( SELECT trips.trip_id
   FROM trips
  WHERE (trips.user_id = auth.uid())))                                                                                                            | null                                                                                                                                                                                                                                                                                     |
| public     | transportation      | transportation_delete_policy                           | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | transportation      | transportation_insert_policy                           | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | transportation      | transportation_select_policy                           | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | transportation      | transportation_update_policy                           | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | trip_days           | Allow delete trip days with edit permission            | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | trip_days           | Allow insert trip days with edit permission            | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | trip_days           | Allow read access to trip days                         | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | trip_days           | Allow update trip days with edit permission            | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | trip_days           | trip_days_delete_policy                                | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | trip_days           | trip_days_insert_policy                                | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | trip_days           | trip_days_select_policy                                | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | trip_days           | trip_days_update_policy                                | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | trip_shares         | Trip owners can share trips                            | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | ((EXISTS ( SELECT 1
   FROM trips
  WHERE ((trips.trip_id = trips.trip_id) AND (trips.user_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM trip_shares trip_shares_1
  WHERE ((trip_shares_1.trip_id = trip_shares_1.trip_id) AND (trip_shares_1.shared_with_email = auth.email()))))) |
| public     | trip_shares         | Trips shared with user are viewable                    | SELECT | {public}        | PERMISSIVE | ((auth.uid() = shared_by_user_id) OR (auth.email() = shared_with_email))                                                                                                                           | null                                                                                                                                                                                                                                                                                     |
| public     | trip_shares         | Users can delete shares they created                   | DELETE | {public}        | PERMISSIVE | ((auth.uid() = shared_by_user_id) OR (EXISTS ( SELECT 1
   FROM trips
  WHERE ((trips.trip_id = trips.trip_id) AND (trips.user_id = auth.uid())))))                                                | null                                                                                                                                                                                                                                                                                     |
| public     | trips               | Allow authenticated users to insert trips              | INSERT | {authenticated} | PERMISSIVE | null                                                                                                                                                                                               | (user_id = auth.uid())                                                                                                                                                                                                                                                                   |
| public     | trips               | Allow delete for owners only                           | DELETE | {public}        | PERMISSIVE | (user_id = auth.uid())                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                     |
| public     | trips               | Allow insert for authenticated users                   | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | (user_id = auth.uid())                                                                                                                                                                                                                                                                   |
| public     | trips               | Allow read access to owned and shared trips            | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | trips               | Allow update with edit permission                      | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | trips               | Allow users to delete their own trips                  | DELETE | {authenticated} | PERMISSIVE | (user_id = auth.uid())                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                     |
| public     | trips               | Allow users to update their own trips                  | UPDATE | {authenticated} | PERMISSIVE | (user_id = auth.uid())                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                     |
| public     | trips               | Allow users to view their own trips                    | SELECT | {authenticated} | PERMISSIVE | (user_id = auth.uid())                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                     |
| public     | trips               | Enable insert for authenticated users                  | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | (auth.uid() = user_id)                                                                                                                                                                                                                                                                   |
| public     | trips               | Users can create their own trips                       | INSERT | {authenticated} | PERMISSIVE | null                                                                                                                                                                                               | (auth.uid() = user_id)                                                                                                                                                                                                                                                                   |
| public     | trips               | trip_delete_policy                                     | DELETE | {public}        | PERMISSIVE | (user_id = auth.uid())                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                     |
| public     | trips               | trip_insert_policy                                     | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | (user_id = auth.uid())                                                                                                                                                                                                                                                                   |
| public     | trips               | trip_select_policy                                     | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | trips               | trip_update_policy                                     | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | vision_board_items  | Allow delete vision board items with edit permission   | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | vision_board_items  | Allow insert vision board items with edit permission   | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | vision_board_items  | Allow read access to vision board items                | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | vision_board_items  | Allow update vision board items with edit permission   | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | vision_board_items  | vision_board_items_delete_policy                       | DELETE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | vision_board_items  | vision_board_items_insert_policy                       | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | user_has_edit_permission(trip_id)                                                                                                                                                                                                                                                        |
| public     | vision_board_items  | vision_board_items_select_policy                       | SELECT | {public}        | PERMISSIVE | user_has_read_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| public     | vision_board_items  | vision_board_items_update_policy                       | UPDATE | {public}        | PERMISSIVE | user_has_edit_permission(trip_id)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| storage    | objects             | Allow authenticated users to upload images             | INSERT | {authenticated} | PERMISSIVE | null                                                                                                                                                                                               | (bucket_id = 'trip-images'::text)                                                                                                                                                                                                                                                        |
| storage    | objects             | Allow public read access                               | SELECT | {public}        | PERMISSIVE | (bucket_id = 'trip-images'::text)                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| storage    | objects             | Allow users to delete their own images                 | DELETE | {authenticated} | PERMISSIVE | ((bucket_id = 'trip-images'::text) AND (auth.uid() = owner))                                                                                                                                       | null                                                                                                                                                                                                                                                                                     |
| storage    | objects             | Allow users to update their own images                 | UPDATE | {authenticated} | PERMISSIVE | ((bucket_id = 'trip-images'::text) AND (auth.uid() = owner))                                                                                                                                       | null                                                                                                                                                                                                                                                                                     |
| storage    | objects             | chat_attachments_delete_policy                         | DELETE | {public}        | PERMISSIVE | ((bucket_id = 'chat-attachments'::text) AND ((auth.uid())::text = (storage.foldername(name))[1]))                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| storage    | objects             | chat_attachments_select_policy                         | SELECT | {public}        | PERMISSIVE | ((bucket_id = 'chat-attachments'::text) AND ((auth.uid())::text = (storage.foldername(name))[1]))                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| storage    | objects             | chat_attachments_update_policy                         | UPDATE | {public}        | PERMISSIVE | ((bucket_id = 'chat-attachments'::text) AND ((auth.uid())::text = (storage.foldername(name))[1]))                                                                                                  | null                                                                                                                                                                                                                                                                                     |
| storage    | objects             | chat_attachments_upload_policy                         | INSERT | {public}        | PERMISSIVE | null                                                                                                                                                                                               | ((bucket_id = 'chat-attachments'::text) AND ((auth.uid())::text = (storage.foldername(name))[1]))                                                                                                                                                                                        |